# 使用 XXX（SDK） 连接到部署


本文主要介绍如何在 XXX 项目中使用 Paho XXX，实现客户端与 MQTT 服务器的连接、订阅、收发消息、取消订阅等功能。【没有相关模块的话就去掉】


【**不用介绍**使用的语言和什么是 MQTT，可以介绍一下 Paho XXX】

【其他的一些介绍比如： 用到的其他框架、工具或是其他需要提及的】


本文将分别介绍通过 TCP 端口和 SSL/TLS 端口来连接 MQTT 服务器，对于使用 Serverless 部署的用户，请查看 SSL/TLS 端口连接示例。

## 前置准备

【描述在连接前必须要了解的概念和必须做的环境搭建】

### MQTT 服务器部署

- 使用 EMQX 提供的 [免费公共 MQTT 服务器](https://www.emqx.com/zh/mqtt/public-mqtt5-broker)，该服务基于 EMQX 的 [全托管 MQTT 云服务](https://www.emqx.com/zh) 创建。服务器接入信息如下：

  + 连接地址: **broker.emqx.io**
  + TCP Port: **1883**
  + SSL/TLS Port: **8883**

- 您也可以自己[创建部署](../create/overview.md)，在部署概览下可以查看到连接相关的信息，请确保部署状态为运行中。使用 TCP 端口或 SSL/TLS 端口  测试连接到 MQTT 服务器。如果您是自己创建部署，请设置[认证鉴权](../deployments/auth_overview.md)，在部署控制台`认证鉴权` > `认证` 中设置用户名和密码，用于连接验证。

### XXX【例如 Maven】

本项目使用 Maven 进行项目的构建，请安装 Maven ，……

## 安装依赖

【描述安装依赖需要的步骤】

## 通过 TCP 端口连接
本节介绍了如何通过 TCP 端口连接到部署。


1. 导入库XXX【看需要】

  ```
  XXXX
  ```

2. 连接设置
    示例代码将使用公共 MQTT 服务器来连接，公共 MQTT 服务器无需设置用户名和密码，如果您创建了部署，请在部署控制台找到相应的连接地址，并设置用户名和密码。

  ```
  XXXX
  ```

3. 开始连接 / 编写 MQTT 代码 XXX【看步骤定】
    【根据不同的项目补充其他解释信息】

  ```
  XXXX
  ```


## 通过 SSL/TLS 端口连接
本节介绍了如何通过 SSL/TLS 端口连接到部署。


1. 导入库XXX【看需要】

  ```
  XXXX
  ```

2. 连接设置
    示例代码将使用公共 MQTT 服务器来连接，公共 MQTT 服务器无需设置用户名和密码，如果您创建了部署，请在部署控制台找到相应的连接地址，并设置用户名和密码。

  ```
  XXXX
  ```

3. 证书的设置【看需要】
    【如果需要上传证书，则讲解上传证书部分，如果不需要，则说明设置部分，比如
    `client.tls_set(ca_certs='./broker.emqx.io-ca.crt')`】

  ```
  XXXX
  ```

4. 开始连接 / 编写 MQTT 代码 XXX【看步骤定】
    【根据不同的项目补充其他解释信息】

  ```
  XXXX
  ```

## 订阅和发布

本节主要介绍了如何在已连接到部署的情况下订阅主题并发布消息。

### 订阅主题

设置将要订阅的主题及对应 [QoS 等级](https://www.emqx.com/zh/blog/introduction-to-mqtt-qos)。

【根据不同的项目补充其他解释信息】

```js
xxxx
```

### 取消订阅

通过以下代码取消订阅，此时应指定取消订阅的主题及对应的 QoS 等级。

【根据不同的项目补充其他解释信息】

```js
xxxx
```

### 发布消息

发布消息时需要告知 MQTT Broker 目标主题及消息内容。

【根据不同的项目补充其他解释信息】

```js
xxxx
```

### 接收消息

通过以下代码指定客户端对消息事件进行监听，并在收到消息后执行回调函数，将接收到的消息及其主题打印到控制台。
【根据不同的项目补充其他解释信息】

```js
xxxx
```

### 断开连接

如客户端希望主动断开连接，可以通过如下代码实现：

```
XXXX
```

以上部分仅列出了一些关键代码，项目完整代码请见：XXXX，您可以进行下载并体验。

## 测试验证

【描述测试连接的步骤，比如使用XX工具或 MQTTX】


## 更多内容

综上所述，我们实现了在 XXX 项目中创建 MQTT 连接，使用客户端与 MQTT 服务器进行订阅、收发消息、取消订阅以及断开连接的场景。可以在 [这里](https://github.com/emqx/MQTT-Client-Examples/tree/master/mqtt-client-ESP8266) 下载到示例的源码，同时也可以在 [GitHub](https://github.com/emqx/MQTT-Client-Examples) 上找到更多其他语言的 Demo 示例。

## 常见问题
【如有XXXX】
