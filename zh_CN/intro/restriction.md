# 使用限制


## Serverless

EMQX Cloud Serverless 部署为多租户架构，为了保证每个租户都有稳定的连接环境，对每个部署做了如下限制。

| **限制描述**         | **Serverless**                             | **Serverless**                     |
| -------------------- | ----------------------------------------------------- | -------------------------------------- |
| 最大同时在线长连接数 | 100                                                    | 1000                                 |
| 最大 TPS 上限     | 1000                                                    | 1000                                |
| 单客户端最大 TPS 上限     | 100                                              | 100                                |
| 单客户端订阅主题数   | 10                                                  | 10                                 |
| 每月免费连接分钟数 | 不限                                                  | 1百万                                  |
| 每月免费流量       | 不限            |1GB                                  |
| MQTT 端口     | 8883                                                      | 8883                             |
| Websocket 端口 | 8084                                                    | 8084                            |
| 离线消息保留上限   | 1000                                                  | 1000                                  |
| 共享订阅上限 | 100                                                          | 100                                    |
| API 调用速率限制 | 10 / 秒                                              | 10 / 秒                                    |


## 专有版

专有版的产品使用独立的集群，相比于 Serverless 版本，有更少的使用限制。此处对比了其他公有云 IoT Hub，下表中相关的限制取决于购买的连接数与硬件性能，对应的参数 EMQ 官方均进行过严密性能测试。

> 以下各表中 EMQX 的"不限"指不做技术手段限制，相关项的性能取决于部署规格，具体数据以实际使用场景为准。

### 连接通信

| **限制描述**         | **EMQX Cloud 专有版**                                          | **公有云 IoT Hub**           |
| -------------------- | ----------------------------------------------------- | -------------------------------------- |
| 最大同时在线长连接数 | 取决于规格，1000-1000W+ 可选，大于 5W 请工单联系申请 | 1W-50W                                 |
| 每秒建立连接次数     | 1W                                                    | 200-500                                |
| 单客户端订阅主题数   | 不限                                                  | 10-100                                 |
| 单客户端每秒订阅请求 | 不限                                                  | 10-1W                                  |
| 单客户端上行消息速度 | 不限                                                  | QoS0：30条/秒；QoS1：10条/秒；QoS2：不支持 |
| 单客户端消息下行     | 不限                                                  | 50-100条/s                             |
| 单客户端每秒吞吐带宽 | 不限                                                  | 512-1024KB                             |
| 单个消息长度         | 默认 1024KB，1-256MB 可申请调整                        | 256KB                                  |
| 离线消息最大存储时长 | 默认不限                                              | 1周                                    |

### Topic 限制

| **限制描述**              | **EMQX Cloud 专有版**       | **公有云 IoT Hub**                              |
| ------------------------- | ------------------ | ----------------------------------------------- |
| Topic 数量                | 不限               | 单产品50个                                      |
| 权限                      | 自定义任意主题权限 | 设备只能对自己的有限数量的 Topic 进行消息发布订阅 |
| 订阅/取消订阅操作响应时间 | 立即               | 5-10秒                                          |
