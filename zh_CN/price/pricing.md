# 产品计费

我们提供了多种灵活的产品规格，支持在全球主流的公有云上部署专属于您的全托管 MQTT 服务。

## Serverless 计费

EMQX Serverless 按照部署实际使用量计费，连接实际产生的连接分钟数以及消息产生的流量进行计费。在每月开始时，您会获得一个免费的额度，用于覆盖一定数量的连接分钟和流量。这个免费额度会优先使用，只有在完全用尽后才会产生费用。


### 计费项

**连接费：** 以连接分钟进行计算，1个连接分钟为1个客户端连接到部署1分钟的计量单位，不足1分钟以1分钟计算。

**流量费：** 流量（包含免费流量）指所有**流入部署和流出部署的公网流量**。

**数据集成：** [数据集成](../data_integration/introduction.md)中执行的动作总数。

::: tip 术语解释

**客户端连接数**：同时在线客户端（包含持久会话的离线客户端）连接到部署的数量。

**[持久会话](https://www.emqx.com/zh/blog/mqtt-session)**：即客户端断开连接时，会话仍然保持并保存离线消息，直到会话超时注销。
:::


### 计费和免费额度

| **计费项**         | **免费额度**                | **计费**           |
| -------------------- | ----------------------- | ------------------|
| 连接费      | 每月1百万连接分钟      | ¥8.00/百万连接分钟                            |
| 流量费    | 每月1GB           | ¥1.50/GB                        |
| 规则动作     | 每月1百万规则动作数      | ¥1.80/百万规则动作数                |

### 计费方式

计费方式根据以下公式计算：

**连接费**：
$$
连接费=客户端连接数×连接持续时间（分钟，向上取整）÷1,000,000×8
$$
**流量费**：
$$
流量费=进出流量（字节）÷(1024×1024×1024)×1.5
$$
**数据集成**：
$$
数据集成费用=规则动作执行次数÷1,000,000×1.8
$$
::: tip 连接费计费示例
在24小时的计费周期内，假设用户有以下客户端连接：

- 有 10 个小时客户端连接数为 120
- 有 10 个小时客户端连接数为 20
- 有 4 个小时客户端连接数为 0

则当天的连接分钟数为：
$$
120×60×10+20×60×10+0=84,000 连接分钟
$$
如果在免费额度内，则当天的连接费为 ¥0；如果免费额度已经用完，则当天的连接时间费用为：
$$
84,000÷1,000,000×8=0.672
$$
四舍五入的价格为 ¥0.67。

系统将累积 **24 小时**的连接分钟数以及流量，在每天的 0 点进行结算，计入小时账单并从余额中扣费。您可以前往[账单概览](../billing/overview.md) 查看详细扣费信息。
:::

### 消费限额
消费限额可以让 Serverless 部署每个月的消费额度都控制在设定值之内，或者当达到时给予提醒。消费限额在创建部署时设置，在部署创建完成之后也可以进行修改。

消费限额可以是0-10000之间的整数：
- 如设为0，部署**只会消耗免费额度**，即每月1百万连接分钟和1GB 流量。当免费额度用完，部署将被停止。
- 如设为1-10000 的整数，还应选择当本月部署的消耗达到限额时的动作，如停止部署，或者提醒并且继续计费。此时，请保证账户内余额不为零，若账户内余额降为零，不论您之前设定的动作，部署都将被停止。

## 专有版计费

EMQX 专有版按产品版本、实例规格与消息传输网络流量计费。不限制消息条数，API 调用次数与数据集成的使用。您可根据您的业务情况选择对应的产品和规格，当业务扩张时也确保成本仍然清晰可控。

### 计费项
**基础费用：** 根据创建部署时所选择的产品版本和实例规格（最大连接数、消息 TPS）对应的小时单价计算出的实例基础费用。实际使用中该部分费用仅跟时长相关，不会因为用量（连接数、消息 TPS）的变动而变动。

**流量费用：** 各实例规格均包含了一定量的免费流量。赠送的流量当月有效，如有剩余月底自动清空。当设备通信超出赠送的流量后超出部分将收取流量费用。

::: tip 术语解释

**客户端连接数：** 客户端连接数为同时在线客户端（包含持久会话的离线客户端）总数。

**[持久会话](https://www.emqx.com/zh/blog/mqtt-session)：** 即客户端断开连接时，会话仍然保持并保存离线消息，直到会话超时注销。

**流量：** 流量（包含免费流量）指所有**流出部署的公网流量** 。

   - 通过 VPC 对等连接或私网连接的流量不计算在流量中。
   - 部署接收到的消息的流量（如客户端发送给部署的消息）不计算在流量中。
   - 如果开通了 NAT 网关，流出部署的即为公网流量，将计算在流量中。
:::

### 计费方式

一共有两种计费方式：按小时计费和年度预付。

#### 按小时计费的规格费用

您在控制台自助创建的专有版部署将按小时计费，费用按前一小时内专有版部署消费情况计算，每小时统计核算一次（小时账单），并从您的账户余额中扣费，然后累加到当月消费（月账单），您可以前往[账单概览](../billing/overview.md)查看详细扣费信息。

<table>
   <tr>
      <th>版本</th>
      <th>规格</th>
      <th>基础费用</th>
      <th>赠送流量</th>
      <th>超出流量单价</th>
   </tr>
   <tr>
      <td rowspan="5">专有版</td>
      <td>1,000连接/最高1,000TPS</td>
      <td>￥1.28/小时</td>
      <td rowspan="4">100G/月</td>
      <td rowspan="4">￥1.5/GB</td>
   </tr>
   <tr>
      <td>2,000连接/最高2,000TPS</td>
      <td>￥1.48/小时</td>
   </tr>
   <tr>
      <td>5,000连接/最高10,000TPS</td>
      <td>￥2.18/小时</td>
   </tr>
   <tr>
      <td>10,000连接/最高20,000TPS</td>
      <td>￥3.99/小时</td>
   </tr>
   <tr>
      <td>>10,000连接</td>
      <td colspan="3" align="center">联系商务</td>
   </tr>
</table>


您还可以在[产品定价](https://www.emqx.com/zh/pricing)页面获取到不同产品和规格对应部署每小时价格。

::: warning 注意
根据所选的公有云平台及部署地域的不同，价格可能存在差异。实际价格以部署页面显示价格为准。
:::

#### 年度预付方式

如果您希望选择年度预付计费方式，请联系我们的[销售](https://www.emqx.com/zh/contact?product=cloud)团队了解包年选项和专属折扣。


### 停止部署的计费
**按小时计费的专有版部署**在停止时将按照以下价格收取数据保留费用：¥0.26/小时。

## 旗舰版

旗舰版为具有高级需求的企业提供全面解决方案。它提供专用资源和增强功能，旨在满足复杂需求。该版本结合了固定年费订阅的可靠性与按使用量计费的灵活性，确保能根据您的业务增长进行扩展。

### 计费单位

**基础费用**：基于您分配资源的年度使用费用，确保全年提供专用容量。

**使用费用**：根据数据流量的可变费用，包括：

- 入网流量：每 GB 0.50元
- 出网流量：每 GB 1.00元

### 计费方式

**年度付费**：旗舰版采用年度计费周期，基础费用涵盖您整年所需的专用资源分配。

**基于流量的收费**：月度使用费用根据您的入网和出网数据流量计算，提供清晰且可预测的费用结构。

如需更多信息或定制您的旗舰版，请联系我们的[销售](https://www.emqx.com/zh/contact?product=cloud&productEdition=Premium)团队。

## BYOC 计费

EMQX BYOC 会在您的云平台账号中部署 EMQX 服务，相关费用包括云平台资源费用和 EMQX BYOC 许可证费用。

### 费用组成

| **计费项**             | **说明**                                                                                                                                |
|---------------------|---------------------------------------------------------------------------------------------------------------------------------------|
| 云平台资源               | EMQX BYOC 部署在运行时，会使用您云平台账号下的虚拟机、网络等资源，您需要向云平台厂商支付相关资源的使用费。                                                                      |
| EMQX BYOC 许可证 | 使用 EMQX BYOC 服务时，您需要向 EMQ 支付订阅费以获取一个正式的 EMQX BYOC 许可证。如需了解许可证价格详情，请[联系我们](https://www.emqx.com/zh/contact?product=cloud&productEdition=BYOC&pageType=getQuotes)。 |

## 配额和限制

在了解产品部署计费的同时，您还需要全面了解每种部署的配额限制、避免您的配置超出配额限制，以免对您的部署稳定性和业务运行造成影响。具体内容，参见[配额和限制](../create/restriction.md)。